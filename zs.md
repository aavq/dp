–ö–æ—Ä–æ—Ç–∫–æ: –≤—Å—ë –Ω–æ—Ä–º–∞–ª—å–Ω–æ üëç
`-zsh` –≤ –≤—ã–≤–æ–¥–µ `ps` ‚Äî —ç—Ç–æ **–Ω–µ –±–∞–≥**, –∞ –ø—Ä–∏–∑–Ω–∞–∫ —Ç–æ–≥–æ, —á—Ç–æ —É —Ç–µ–±—è –∑–∞–ø—É—â–µ–Ω **login-shell zsh**.

–†–∞–∑–±–µ—Ä—ë–º—Å—è –ø–æ –ø—É–Ω–∫—Ç–∞–º –∏ –≤–µ—Ä–Ω—ë–º—Å—è –∫ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–π –ø—Ä–æ–±–ª–µ–º–µ —Å `~/.zshrc`.

---

## 1. –ß—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç `-zsh` –∏ –ø–æ—á–µ–º—É —ç—Ç–æ –æ–∫

* `ps -p $$ -o comm=` –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç **–∏–º—è –∫–æ–º–∞–Ω–¥—ã**, –∫–æ—Ç–æ—Ä–æ–π –∑–∞–ø—É—â–µ–Ω —Ç–µ–∫—É—â–∏–π –ø—Ä–æ—Ü–µ—Å—Å.
* –õ–∏–¥–∏—Ä—É—é—â–∏–π –¥–µ—Ñ–∏—Å (`-zsh`) –æ–∑–Ω–∞—á–∞–µ—Ç:
  üëâ *¬´—ç—Ç–æ login-shell¬ª* (–æ–±–æ–ª–æ—á–∫–∞, –∑–∞–ø—É—â–µ–Ω–Ω–∞—è –∫–∞–∫ –ª–æ–≥–∏–Ω, –∫–∞–∫ –±—É–¥—Ç–æ –ø–æ—Å–ª–µ –ª–æ–≥–∏–Ω–∞ –≤ —Å–∏—Å—Ç–µ–º—É).

–≠—Ç–æ —Å—Ç–∞—Ä—ã–π UNIX-–ø–∞—Ç—Ç–µ—Ä–Ω: login-shell–∏ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è —Å –¥–µ—Ñ–∏—Å–æ–º –ø–µ—Ä–µ–¥ –∏–º–µ–Ω–µ–º, –Ω–∞–ø—Ä–∏–º–µ—Ä:

* `-zsh`
* `-bash`

–ü–æ—ç—Ç–æ–º—É:

* `ps -p $$ -o comm=` ‚Üí `-zsh` ‚úÖ
  ‚áí —É —Ç–µ–±—è login-shell zsh.
* `echo $SHELL` ‚Üí `/bin/zsh` ‚úÖ
  ‚áí —Ç–≤–æ–π *–ª–æ–≥–∏–Ω-—à–µ–ª–ª –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é* ‚Äî zsh.

–° —Ç–æ—á–∫–∏ –∑—Ä–µ–Ω–∏—è zsh —ç—Ç–æ –∏–¥–µ–∞–ª—å–Ω–æ: –Ω–æ–≤—ã–π —Ç–µ—Ä–º–∏–Ω–∞–ª –¥–æ–ª–∂–µ–Ω –∑–∞–ø—É—Å–∫–∞—Ç—å—Å—è –≤ zsh –∏ **–¥–æ–ª–∂–µ–Ω** —á–∏—Ç–∞—Ç—å `~/.zshrc` –¥–ª—è –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–π —Å–µ—Å—Å–∏–∏.

---

## 2. –ó–Ω–∞—á–∏—Ç, –ø—Ä–æ–±–ª–µ–º–∞ –Ω–µ –≤ –∑–∞–ø—É—Å–∫–µ zsh, –∞ –≤ —Å–∞–º–æ–º `~/.zshrc`

–†–∞–∑ –≤—Å—ë —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π –∑–∞–ø—É—Å–∫ zsh, –æ—Å—Ç–∞—é—Ç—Å—è –≤–∞—Ä–∏–∞–Ω—Ç—ã:

1. `~/.zshrc` –≤–æ–æ–±—â–µ **–Ω–µ –∏—Å–ø–æ–ª–Ω—è–µ—Ç—Å—è** –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ;
2. `~/.zshrc` –∏—Å–ø–æ–ª–Ω—è–µ—Ç—Å—è, –Ω–æ **—Ä–∞–Ω—å—à–µ –≤—Ä–µ–º–µ–Ω–∏ –¥–µ–ª–∞–µ—Ç `return`/`exit`**, –∏ —Ç–≤–æ–∏ –∞–≤—Ç–æ–¥–æ–ø–æ–ª–Ω–µ–Ω–∏—è –Ω–µ –¥–æ—Ö–æ–¥—è—Ç –¥–æ –∏—Å–ø–æ–ª–Ω–µ–Ω–∏—è;
3. –∞–≤—Ç–æ–¥–æ–ø–æ–ª–Ω–µ–Ω–∏—è/`compinit` –∑–∞–≤–µ–¥–µ–Ω—ã —Ç–∞–∫, —á—Ç–æ —Ä–µ–∞–ª—å–Ω–æ –∞–∫—Ç–∏–≤–∏—Ä—É—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –∫–æ–≥–¥–∞ —Ç—ã –≤—Ä—É—á–Ω—É—é –¥–µ–ª–∞–µ—à—å `source ~/.zshrc`.

–ß—Ç–æ–±—ã –Ω–µ –≥–∞–¥–∞—Ç—å, –¥–∞–≤–∞–π —Å–¥–µ–ª–∞–µ–º –º–∏–Ω–∏–º–∞–ª—å–Ω—É—é –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫—É, –∫–æ—Ç–æ—Ä—É—é –º–æ–∂–Ω–æ –ø—Ä–æ—Å—Ç–æ –ø–æ—à–∞–≥–æ–≤–æ –≤—ã–ø–æ–ª–Ω–∏—Ç—å.

---

## 3. –ü—Ä–æ–≤–µ—Ä—è–µ–º, –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –ª–∏ `~/.zshrc` –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ

1. –û—Ç–∫—Ä–æ–π `~/.zshrc` –≤ –ª—é–±–æ–º —Ä–µ–¥–∞–∫—Ç–æ—Ä–µ.
2. –°–∞–º—É—é **–ø–µ—Ä–≤—É—é —Å—Ç—Ä–æ–∫—É** (—Å–∞–º—ã–π –≤–µ—Ä—Ö) —Å–¥–µ–ª–∞–π —Ç–∞–∫–æ–π:

```zsh
echo "DEBUG: ~/.zshrc loaded (PID $$)" >&2
```

3. –°–æ—Ö—Ä–∞–Ω–∏ —Ñ–∞–π–ª, **–∑–∞–∫—Ä–æ–π —Ç–µ—Ä–º–∏–Ω–∞–ª –ø–æ–ª–Ω–æ—Å—Ç—å—é**.
4. –û—Ç–∫—Ä–æ–π –Ω–æ–≤—ã–π —Ç–µ—Ä–º–∏–Ω–∞–ª.

–ï—Å–ª–∏ —Ç—ã –≤–∏–¥–∏—à—å —Å—Ç—Ä–æ—á–∫—É –≤—Ä–æ–¥–µ:

```text
DEBUG: ~/.zshrc loaded (PID 12345)
```

‚Äî —ç—Ç–æ –∑–Ω–∞—á–∏—Ç, —á—Ç–æ `~/.zshrc` **–∏—Å–ø–æ–ª–Ω—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏** –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ.
–ï—Å–ª–∏ –µ—ë **–Ω–µ—Ç** ‚Äî –∑–Ω–∞—á–∏—Ç, zsh –ø–æ –∫–∞–∫–æ–π-—Ç–æ –ø—Ä–∏—á–∏–Ω–µ –µ–≥–æ —Ä–µ–∞–ª—å–Ω–æ –Ω–µ —á–∏—Ç–∞–µ—Ç (–∏ —Ç–æ–≥–¥–∞ –±—É–¥–µ–º –ª–µ—á–∏—Ç—å —ç—Ç–æ).

---

## 4. –ï—Å–ª–∏ `DEBUG` –≤–∏–¥–Ω–æ (—Ç.–µ. `.zshrc` –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è, –Ω–æ –∞–≤—Ç–æ–¥–æ–ø–æ–ª–Ω–µ–Ω–∏—è –Ω–µ —Ä–∞–±–æ—Ç–∞—é—Ç)

–¢–æ–≥–¥–∞ –ø—Ä–æ–±–ª–µ–º–∞ –ø–æ—á—Ç–∏ –Ω–∞–≤–µ—Ä–Ω—è–∫–∞ –≤ —Å–æ–¥–µ—Ä–∂–∏–º–æ–º `.zshrc`.

### 4.1. –£–±–µ–¥–∏—Å—å, —á—Ç–æ –±–ª–æ–∫ oh-my-zsh –Ω–∞ –º–µ—Å—Ç–µ –∏ –≤—ã—à–µ —Ç–≤–æ–∏—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫

–í `.zshrc` –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –ø—Ä–∏–º–µ—Ä–Ω–æ —Ç–∞–∫–æ–π –±–ª–æ–∫ (–∏–º–µ–Ω–∞ —Ç–µ–º—ã/–ø–ª–∞–≥–∏–Ω–æ–≤ –º–æ–≥—É—Ç –æ—Ç–ª–∏—á–∞—Ç—å—Å—è):

```zsh
export ZSH="$HOME/.oh-my-zsh"

ZSH_THEME="robbyrussell"        # –∏–ª–∏ —Ç–≤–æ—è —Ç–µ–º–∞
plugins=(git kubectl)           # —Ç–≤–æ–∏ –ø–ª–∞–≥–∏–Ω—ã

source $ZSH/oh-my-zsh.sh        # <<< —ç—Ç–æ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ
```

–í—Å–µ —Ç–≤–æ–∏ –¥–æ–ø. –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ (–∞–≤—Ç–æ–¥–æ–ø–æ–ª–Ω–µ–Ω–∏—è, –∞–ª–∏–∞—Å—ã –∏ —Ç.–ø.) –ª—É—á—à–µ –¥–µ—Ä–∂–∞—Ç—å **–Ω–∏–∂–µ** —ç—Ç–æ–≥–æ –±–ª–æ–∫–∞.

### 4.2. –í—ã–Ω–µ—Å–∏ —Å–≤–æ–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–π —Ñ–∞–π–ª

–≠—Ç–æ –∏ –∞–∫–∫—É—Ä–∞—Ç–Ω–æ, –∏ –Ω–µ –ª–æ–º–∞–µ—Ç oh-my-zsh.

–í –∫–æ–Ω—Ü–µ `~/.zshrc` (–Ω–∏–∂–µ `source $ZSH/oh-my-zsh.sh`) –¥–æ–±–∞–≤—å:

```zsh
# --- User config ---------------------------------------------------------
[[ -f ~/.zshrc.local ]] && source ~/.zshrc.local
```

–¢–µ–ø–µ—Ä—å —Å–æ–∑–¥–∞–π —Ñ–∞–π–ª `~/.zshrc.local` –∏ —Ç—É–¥–∞ –ø–µ—Ä–µ–ª–æ–∂–∏ –≤—Å–µ —Å–≤–æ–∏ –∞–≤—Ç–æ–¥–æ–ø–æ–ª–Ω–µ–Ω–∏—è, –Ω–∞–ø—Ä–∏–º–µ—Ä:

```zsh
# kubectl completion
if command -v kubectl >/dev/null 2>&1; then
  source <(kubectl completion zsh)
fi

# helm completion
if command -v helm >/dev/null 2>&1; then
  source <(helm completion zsh)
fi

# –∏ —Ç.–¥. –¥–ª—è –¥—Ä—É–≥–∏—Ö CLI
```

–ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ:

* –Ω–æ–≤—ã–π —Ç–µ—Ä–º–∏–Ω–∞–ª ‚Üí –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏—Å–ø–æ–ª–Ω—è–µ—Ç—Å—è `~/.zshrc`;
* `~/.zshrc` ‚Üí —Ç—è–Ω–µ—Ç oh-my-zsh;
* –∑–∞—Ç–µ–º —Ç—è–Ω–µ—Ç —Ç–≤–æ–π `~/.zshrc.local` —Å –∞–≤—Ç–æ–¥–æ–ø–æ–ª–Ω–µ–Ω–∏—è–º–∏;
* —Ç–µ–±–µ —É–∂–µ **–Ω–µ –Ω—É–∂–Ω–æ** —Ä—É–∫–∞–º–∏ –¥–µ–ª–∞—Ç—å `source ~/.zshrc`.

---

## 5. –ï—Å–ª–∏ `DEBUG` –Ω–µ –≤–∏–¥–Ω–æ (—Ç.–µ. `.zshrc` –Ω–µ —á–∏—Ç–∞–µ—Ç—Å—è –≤–æ–æ–±—â–µ)

–¢–æ–≥–¥–∞ –µ—Å—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ç–∏–ø–∏—á–Ω—ã—Ö –ø—Ä–∏—á–∏–Ω.

### 5.1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å `ZDOTDIR`

–í —É–∂–µ –æ—Ç–∫—Ä—ã—Ç–æ–º zsh:

```zsh
echo $ZDOTDIR
```

* –ï—Å–ª–∏ –ø—É—Å—Ç–æ ‚Üí zsh –∏—â–µ—Ç `.zshrc` –≤ `$HOME` (`~/.zshrc`), –∫–∞–∫ –æ–±—ã—á–Ω–æ.
* –ï—Å–ª–∏ –Ω–µ –ø—É—Å—Ç–æ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `/Users/you/.config/zsh`) ‚Üí zsh –∏—â–µ—Ç **—Ç–∞–º**:
  –∫–æ–Ω—Ñ–∏–≥ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –ø–æ –ø—É—Ç–∏ `$ZDOTDIR/.zshrc`.

–í —ç—Ç–æ–º —Å–ª—É—á–∞–µ –º–æ–∂–Ω–æ:

```zsh
mv ~/.zshrc "$ZDOTDIR/.zshrc"
# –∏–ª–∏
ln -s "$HOME/.zshrc" "$ZDOTDIR/.zshrc"
```

### 5.2. –¢–µ—Ä–º–∏–Ω–∞–ª –∑–∞–ø—É—Å–∫–∞–µ—Ç `zsh` —Å –∫–ª—é—á–æ–º `-f` (–±–µ–∑ rc-—Ñ–∞–π–ª–æ–≤)

–í –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö –ø—Ä–æ—Ñ–∏–ª—è —Ç–µ—Ä–º–∏–Ω–∞–ª–∞ –∏–Ω–æ–≥–¥–∞ –±—ã–≤–∞–µ—Ç –∫–æ–º–∞–Ω–¥–∞ –≤—Ä–æ–¥–µ:

```sh
zsh -f
```

–≠—Ç–æ –∫–ª—é—á ¬´–Ω–µ —á–∏—Ç–∞—Ç—å –Ω–∏ –æ–¥–∏–Ω rc-—Ñ–∞–π–ª¬ª. –ù—É–∂–Ω–æ –∑–∞–º–µ–Ω–∏—Ç—å –Ω–∞:

```sh
zsh
```

–∏–ª–∏ –ø—Ä–æ—Å—Ç–æ –≤—ã–±—Ä–∞—Ç—å ¬´–∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å login shell / default shell¬ª.

---

## 6. –ß—Ç–æ —Ç–µ–±–µ –≤–∞–∂–Ω–æ –∑–Ω–∞—Ç—å –ø—Ä—è–º–æ —Å–µ–π—á–∞—Å

* **–û—Ç–≤–µ—Ç –Ω–∞ —Ç–≤–æ–π –≤–æ–ø—Ä–æ—Å:**
  `-zsh` –≤ `ps -p $$ -o comm=` ‚Äî —ç—Ç–æ –∞–±—Å–æ–ª—é—Ç–Ω–æ –Ω–æ—Ä–º–∞–ª—å–Ω—ã–π –∏ –¥–∞–∂–µ –æ–∂–∏–¥–∞–µ–º—ã–π –≤—ã–≤–æ–¥.
  –û–Ω –ø—Ä–æ—Å—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç ¬´login-zsh¬ª. –ù–∏–∫–∞–∫–æ–π –æ—à–∏–±–∫–∏ –∑–¥–µ—Å—å –Ω–µ—Ç.

* –ü–æ –≤—ã–≤–æ–¥—É `echo $SHELL` –∏ `ps` –≤–∏–¥–Ω–æ, —á—Ç–æ:

  * —Ç–≤–æ–π –ª–æ–≥–∏–Ω-—à–µ–ª–ª ‚Äî `/bin/zsh`,
  * —Ç—ã —Å–µ–π—á–∞—Å —Ä–∞–±–æ—Ç–∞–µ—à—å –∏–º–µ–Ω–Ω–æ –≤ zsh.

–¢–æ –µ—Å—Ç—å —Å –≤—ã–±–æ—Ä–æ–º —à–µ–ª–ª–∞ –≤—Å—ë —É–∂–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ, –∏ –Ω–∏—á–µ–≥–æ –º–µ–Ω—è—Ç—å (—Ç–∏–ø–∞ `chsh`) —Ç–µ–±–µ –Ω–µ –Ω—É–∂–Ω–æ.

–î–∞–ª—å—à–µ –≤—Å—ë —É–ø–∏—Ä–∞–µ—Ç—Å—è –≤ —Ç–æ, —á—Ç–æ–±—ã:

1. –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ `~/.zshrc` –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è (—á–µ—Ä–µ–∑ `DEBUG`-—Å—Ç—Ä–æ–∫—É).
2. –†–∞–∑–ª–æ–∂–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥ —Ç–∞–∫, —á—Ç–æ–±—ã oh-my-zsh –∂–∏–ª —Å–≤–æ–µ–π –∂–∏–∑–Ω—å—é, –∞ —Ç–≤–æ–∏ –∞–≤—Ç–æ–¥–æ–ø–æ–ª–Ω–µ–Ω–∏—è ‚Äî –≤ `~/.zshrc.local`, –∫–æ—Ç–æ—Ä—ã–π –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–¥—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç—Å—è.

–ï—Å–ª–∏ —Ö–æ—á–µ—à—å, –º–æ–∂–µ—à—å —Å—é–¥–∞ –ø—Ä–æ—Å—Ç–æ —Å–∫–∏–Ω—É—Ç—å —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Å–≤–æ–µ–≥–æ `~/.zshrc` (–º–æ–∂–Ω–æ –∑–∞–º–∞–∑–∞—Ç—å/—É–¥–∞–ª–∏—Ç—å —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–µ `export`‚Äô—ã —Å —Ç–æ–∫–µ–Ω–∞–º–∏ –∏ —Ç.–ø.), –∞ —è –∞–∫–∫—É—Ä–∞—Ç–Ω–æ —Ä–∞–∑–ª–æ–∂—É –µ–≥–æ –ø–æ —Å–µ–∫—Ü–∏—è–º (`oh-my-zsh` + —Ç–≤–æ–π `~/.zshrc.local`) —Ç–∞–∫, —á—Ç–æ–±—ã:

* –≤—Å—ë –≥—Ä—É–∑–∏–ª–æ—Å—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ —Ç–µ—Ä–º–∏–Ω–∞–ª–∞,
* –∞–≤—Ç–æ–¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ kubectl/helm –∏ –ø—Ä–æ—á–µ–≥–æ —Ä–∞–±–æ—Ç–∞–ª–æ,
* –∏ oh-my-zsh –Ω–µ –ª–æ–º–∞–ª—Å—è.
